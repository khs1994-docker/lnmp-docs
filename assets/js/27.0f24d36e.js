(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{193:function(t,s,e){"use strict";e.r(s);var a=e(0),r=Object(a.a)({},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"content"},[t._m(0),t._v(" "),e("p",[e("a",{attrs:{href:"https://cloud.tencent.com/redirect.php?redirect=10058&cps_key=3a5255852d5db99dcd5da4c72f05df61",target:"_blank",rel:"noopener noreferrer"}},[e("img",{attrs:{src:"https://img.shields.io/badge/AD-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%AE%B9%E5%99%A8%E6%9C%8D%E5%8A%A1-blue.svg",alt:""}}),e("OutboundLink")],1),t._v(" "),e("a",{attrs:{href:"https://cloud.tencent.com/developer/support-plan?invite_code=13vokmlse8afh",target:"_blank",rel:"noopener noreferrer"}},[e("img",{attrs:{src:"https://img.shields.io/badge/Support-%E8%85%BE%E8%AE%AF%E4%BA%91%E8%87%AA%E5%AA%92%E4%BD%93-brightgreen.svg",alt:""}}),e("OutboundLink")],1)]),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._m(4),t._m(5)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"crontab-计划任务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#crontab-计划任务","aria-hidden":"true"}},[this._v("#")]),this._v(" Crontab 计划任务")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("https://crontab.guru/")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"编辑宿主机-crontab-配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#编辑宿主机-crontab-配置文件","aria-hidden":"true"}},[this._v("#")]),this._v(" 编辑宿主机 crontab 配置文件")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[this._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[this._v("crontab")]),this._v(" -e\n")])])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("* * * * * /usr/local/bin/docker "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("exec")]),t._v(" -i "),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),t._v(" docker container "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v(" --format "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'{{.ID}}'")]),t._v(" -f label"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("com.khs1994.com -f label"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("com.docker.compose.service"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("php7 "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v(" sh -c "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"php /app/path-to-your-project/artisan schedule:run >> /dev/null 2>&1"')]),t._v("\n\n* * * * * /usr/local/bin/docker "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("exec")]),t._v(" -i "),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),t._v(" docker container "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v(" --format "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'{{.ID}}'")]),t._v(" -f label"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("com.khs1994.com -f label"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("com.docker.swarm.service.name"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("lnmp_php7 "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v(" sh -c "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"php /app/path-to-your-project/artisan schedule:run >> /dev/null 2>&1"')]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("原理：通过在 "),s("strong",[this._v("宿主机")]),this._v(" 计划执行 "),s("code",[this._v("docker exec ***")]),this._v("，变相实现容器内计划任务，只适用于 "),s("strong",[this._v("单机环境")]),this._v("。")])}],!1,null,null,null);s.default=r.exports}}]);