(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{414:function(s,t,a){"use strict";a.r(t);var n=a(42),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"minio"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#minio"}},[s._v("#")]),s._v(" Minio")]),s._v(" "),a("ul",[a("li",[s._v("https://docs.min.io/docs/minio-quickstart-guide.html")]),s._v(" "),a("li",[s._v("https://github.com/minio/minio")])]),s._v(" "),a("h2",{attrs:{id:"配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[s._v("#")]),s._v(" 配置")]),s._v(" "),a("p",[s._v("在 "),a("code",[s._v(".env")]),s._v(" 文件中将 "),a("code",[s._v("minio")]),s._v(" 包含进来")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LNMP_SERVICES")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx mysql php7 redis minio"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LREW_INCLUDE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"minio pcit"')]),s._v("\n")])])]),a("h3",{attrs:{id:"配置-nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置-nginx"}},[s._v("#")]),s._v(" 配置 NGINX")]),s._v(" "),a("p",[s._v("将 "),a("code",[s._v("config/nginx/minio.config")]),s._v(" 复制为 "),a("code",[s._v("config/nginx/minio.conf")])]),s._v(" "),a("h3",{attrs:{id:"其他配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其他配置"}},[s._v("#")]),s._v(" 其他配置")]),s._v(" "),a("p",[s._v("自行在 "),a("code",[s._v(".env")]),s._v(" 文件添加 "),a("a",{attrs:{href:"https://github.com/khs1994-docker/lnmp/blob/master/lrew/minio/.env.compose",target:"_blank",rel:"noopener noreferrer"}},[s._v("minio"),a("OutboundLink")],1),s._v(" 相关变量")]),s._v(" "),a("h4",{attrs:{id:"密钥配置-非常重要"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#密钥配置-非常重要"}},[s._v("#")]),s._v(" 密钥配置（非常重要）")]),s._v(" "),a("p",[s._v("在 "),a("code",[s._v(".env")]),s._v(" 进行配置")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MINIO_ACCESS_KEY")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("minioadmin\n\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MINIO_SECRET_KEY")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("minioadmin\n")])])]),a("blockquote",[a("p",[s._v("自行修改配置之后，下边命令中的密钥换成你自己设置的！")])]),s._v(" "),a("h4",{attrs:{id:"启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动"}},[s._v("#")]),s._v(" 启动")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ ./lnmp-docker up\n")])])]),a("h3",{attrs:{id:"验证"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#验证"}},[s._v("#")]),s._v(" 验证")]),s._v(" "),a("p",[s._v("打开 "),a("code",[s._v("https://minio.t.khs1994.com")])]),s._v(" "),a("p",[a("code",[s._v("minioadmin")])]),s._v(" "),a("p",[a("code",[s._v("minioadmin")])]),s._v(" "),a("p",[s._v("在登录框输入上面密钥即可")]),s._v(" "),a("h2",{attrs:{id:"客户端安装-mc"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#客户端安装-mc"}},[s._v("#")]),s._v(" 客户端安装(mc)")]),s._v(" "),a("ul",[a("li",[s._v("https://dl.minio.io/server/minio/release/")]),s._v(" "),a("li",[s._v("https://dl.minio.io/client/mc/release/")])]),s._v(" "),a("p",[s._v("选择对应的操作系统，移入 PATH 即可")]),s._v(" "),a("blockquote",[a("p",[s._v("官网直接下载可能较缓慢。")])]),s._v(" "),a("h3",{attrs:{id:"windows-安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#windows-安装"}},[s._v("#")]),s._v(" Windows 安装")]),s._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[s._v("$ lnmp"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("windows"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("pm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ps1 install minio\n")])])]),a("h3",{attrs:{id:"macos-安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#macos-安装"}},[s._v("#")]),s._v(" macOS 安装")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ brew "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" minio/stable/minio\n\n$ brew "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" minio/stable/mc\n")])])]),a("h3",{attrs:{id:"命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命令"}},[s._v("#")]),s._v(" 命令")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mc")]),s._v(" config "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" minio https://minio.t.khs1994.com minioadmin minioadmin\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 上传文件")]),s._v("\n\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mc")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /path minio/mybucket\n")])])]),a("h2",{attrs:{id:"laravel"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#laravel"}},[s._v("#")]),s._v(" Laravel")]),s._v(" "),a("p",[s._v("minio API 与 AWS s3 兼容，所以可以很方便的在 Laravel 中使用 minio")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("composer")]),s._v(" require league/flysystem-aws-s3-v3\n")])])]),a("p",[a("code",[s._v("config/filesystems.php")]),s._v(" 中进行如下设置。")]),s._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'s3'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'driver'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'s3'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'key'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("env")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'AWS_ACCESS_KEY_ID'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'secret'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("env")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'AWS_SECRET_ACCESS_KEY'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'region'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("env")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'AWS_DEFAULT_REGION'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'us-east-1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 随便填一个")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'bucket'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("env")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'AWS_BUCKET'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 使用前先在 minio web 界面新建一个 bucket")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'use_path_style_endpoint'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean constant"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 必须加上")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'endpoint'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'https://minio.t.khs1994.com'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])])]),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shell-comment comment"}},[s._v("# 在 minio 中存储一个文件")]),s._v("\n\\"),a("span",{pre:!0,attrs:{class:"token package"}},[s._v("Storage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("disk")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'s3'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("put")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'test.txt'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("ul",[a("li",[s._v("https://docs.minio.io/docs/how-to-use-aws-sdk-for-php-with-minio-server.html")])])])}),[],!1,null,null,null);t.default=e.exports}}]);