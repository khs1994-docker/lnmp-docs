(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{240:function(s,t,e){"use strict";e.r(t);var a=e(0),n=Object(a.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"content"},[e("h1",{attrs:{id:"systemd"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#systemd","aria-hidden":"true"}},[s._v("#")]),s._v(" systemd")]),s._v(" "),e("p",[s._v("systemd 文件位于 "),e("code",[s._v("cli/systemd/*")])]),s._v(" "),e("p",[s._v("适用于 "),e("code",[s._v("Linux x86_64")]),s._v(" 开发环境。")]),s._v(" "),e("blockquote",[e("p",[s._v("务必熟悉 "),e("code",[s._v("systemd")]),s._v(" 之后再执行此项操作。")])]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$LNMP_PATH")]),s._v("/cli/systemd/lnmp-docker.service /etc/systemd/system/\n\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/systemd/system/lnmp-docker.service\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 务必自行修改路径为本项目实际路径")]),s._v("\n\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl daemon-reload\n\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl start lnmp-docker\n\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl status lnmp-docker\n\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl stop lnmp-docker\n\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" journalctl -u lnmp-docker\n")])])]),e("h2",{attrs:{id:"每周清理日志"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#每周清理日志","aria-hidden":"true"}},[s._v("#")]),s._v(" 每周清理日志")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" -a "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$LNMP_PATH")]),s._v("/cli/systemd/*-cleanup /etc/systemd/system/\n\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/systemd/system/lnmp-docker-cleanup.service\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 务必自行修改路径为本项目实际路径")]),s._v("\n\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl daemon-reload\n\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("enable")]),s._v(" cleanup-lnmp-docker.timer\n\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl start cleanup-lnmp-docker.timer\n\n$ systemctl list-timers\n\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" journalctl -u cleanup-lnmp-docker\n")])])]),e("h2",{attrs:{id:"定时备份数据文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#定时备份数据文件","aria-hidden":"true"}},[s._v("#")]),s._v(" 定时备份数据文件")]),s._v(" "),e("p",[s._v("与上方内容类似，这里不再赘述。")]),s._v(" "),e("h2",{attrs:{id:"laravel-队列-queue"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#laravel-队列-queue","aria-hidden":"true"}},[s._v("#")]),s._v(" Laravel 队列(Queue)")]),s._v(" "),e("p",[s._v("原理就是执行 "),e("code",[s._v("$ docker exec -it PHP_CONTAINER_ID COMMAND")])]),s._v(" "),e("p",[s._v("由 "),e("code",[s._v("systemd")]),s._v(" 管理")]),s._v(" "),e("h2",{attrs:{id:"laravel-调度器-schedule"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#laravel-调度器-schedule","aria-hidden":"true"}},[s._v("#")]),s._v(" Laravel 调度器(Schedule)")]),s._v(" "),e("p",[s._v("原理就是执行 "),e("code",[s._v("$ docker exec -it PHP_CONTAINER_ID COMMAND")])]),s._v(" "),e("p",[s._v("由 "),e("code",[s._v("systemd")]),s._v(" 管理")]),s._v(" "),e("h1",{attrs:{id:"more-information"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#more-information","aria-hidden":"true"}},[s._v("#")]),s._v(" More Information")]),s._v(" "),e("ul",[e("li",[s._v("https://blog.khs1994.com/linux/systemd.html")])])])}],!1,null,null,null);t.default=n.exports}}]);