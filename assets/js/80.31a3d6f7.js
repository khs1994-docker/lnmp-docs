(window.webpackJsonp=window.webpackJsonp||[]).push([[80],{434:function(e,t,a){"use strict";a.r(t);var v=a(42),r=Object(v.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[e._v("#")]),e._v(" 配置")]),e._v(" "),a("p",[e._v("假设在 "),a("code",[e._v("开发环境")]),e._v(" 中已经将 PHP 项目测试完毕，并推送到了 "),a("code",[e._v("git")]),e._v("，准备在生产环境部署。")]),e._v(" "),a("h2",{attrs:{id:"生产环境注意事项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生产环境注意事项"}},[e._v("#")]),e._v(" 生产环境注意事项")]),e._v(" "),a("p",[e._v("在生产环境中建议使用 "),a("code",[e._v("Docker Swarm mode")]),e._v(" 或 "),a("code",[e._v("k8s")]),e._v("。")]),e._v(" "),a("h2",{attrs:{id:"单机"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#单机"}},[e._v("#")]),e._v(" 单机")]),e._v(" "),a("p",[e._v("单机环境中通过 "),a("code",[e._v("数据卷")]),e._v(" 将 "),a("code",[e._v("项目文件")]),e._v(" 挂载到容器中。")]),e._v(" "),a("p",[e._v("将 PHP 项目克隆到 "),a("code",[e._v("./app")]),e._v(" 目录下，之后使用 "),a("code",[e._v("lnmp-composer ...")]),e._v(" 安装依赖。")]),e._v(" "),a("p",[e._v("在 "),a("code",[e._v("./config/nginx/*.conf")]),e._v(" 增加 nginx 配置。")]),e._v(" "),a("p",[e._v("执行 "),a("code",[e._v("./lnmp-docker swarm-deploy")]),e._v("。")]),e._v(" "),a("h2",{attrs:{id:"集群"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#集群"}},[e._v("#")]),e._v(" 集群")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("直接将 PHP 项目打入镜像，以容器方式 ("),a("code",[e._v("Dockerfile")]),e._v(") 交付。可以参考 "),a("a",{attrs:{href:"https://github.com/khs1994-docker/laravel-demo",target:"_blank",rel:"noopener noreferrer"}},[e._v("Laravel Demo"),a("OutboundLink")],1)])]),e._v(" "),a("li",[a("p",[e._v("PHP 项目不打入镜像，运行 daemonset 保证每个节点都有代码文件。")])])]),e._v(" "),a("h2",{attrs:{id:"php"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#php"}},[e._v("#")]),e._v(" PHP")]),e._v(" "),a("p",[e._v("生产环境不启用 "),a("code",[e._v("xdebug")]),e._v(" 扩展")]),e._v(" "),a("h2",{attrs:{id:"phpmyadmin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#phpmyadmin"}},[e._v("#")]),e._v(" phpMyAdmin")]),e._v(" "),a("p",[e._v("生产环境不启用该软件。")]),e._v(" "),a("h2",{attrs:{id:"docker-私有仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-私有仓库"}},[e._v("#")]),e._v(" Docker 私有仓库")]),e._v(" "),a("p",[e._v("Docker 镜像分发可以使用 Docker 私有仓库。")])])}),[],!1,null,null,null);t.default=r.exports}}]);