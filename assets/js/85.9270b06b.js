(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{283:function(e,t,r){"use strict";r.r(t);var a=r(0),_=Object(a.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"xdebug-in-docker-phpstorm-最佳实践"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#xdebug-in-docker-phpstorm-最佳实践"}},[e._v("#")]),e._v(" Xdebug in Docker + PhpStorm 最佳实践")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://cloud.tencent.com/redirect.php?redirect=10058&cps_key=3a5255852d5db99dcd5da4c72f05df61",target:"_blank",rel:"noopener noreferrer"}},[r("img",{attrs:{src:"https://img.shields.io/badge/AD-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%AE%B9%E5%99%A8%E6%9C%8D%E5%8A%A1-blue.svg",alt:""}}),r("OutboundLink")],1),e._v(" "),r("a",{attrs:{href:"https://cloud.tencent.com/developer/support-plan?invite_code=13vokmlse8afh",target:"_blank",rel:"noopener noreferrer"}},[r("img",{attrs:{src:"https://img.shields.io/badge/Support-%E8%85%BE%E8%AE%AF%E4%BA%91%E8%87%AA%E5%AA%92%E4%BD%93-brightgreen.svg",alt:""}}),r("OutboundLink")],1)]),e._v(" "),r("ul",[r("li",[e._v("https://xdebug.org/docs/all_settings")])]),e._v(" "),r("p",[r("strong",[e._v("启用 Xdebug 扩展会使 PHP 响应变慢，建议仅在需要调试时打开！")])]),e._v(" "),r("h2",{attrs:{id:"启用-xdebug"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#启用-xdebug"}},[e._v("#")]),e._v(" 启用 xdebug")]),e._v(" "),r("blockquote",[r("p",[e._v("不建议在生产环境启用 "),r("code",[e._v("xdebug")])])]),e._v(" "),r("p",[e._v("编辑 "),r("code",[e._v("config/php/docker-php.ini")]),e._v(" 文件，取消注释")]),e._v(" "),r("div",{staticClass:"language-diff extra-class"},[r("pre",{pre:!0,attrs:{class:"language-diff"}},[r("code",[r("span",{pre:!0,attrs:{class:"token deleted-sign deleted"}},[e._v("- ; zend_extension=xdebug\n")]),r("span",{pre:!0,attrs:{class:"token inserted-sign inserted"}},[e._v("+ zend_extension=xdebug\n")])])])]),r("h2",{attrs:{id:"准备-php-项目"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#准备-php-项目"}},[e._v("#")]),e._v(" 准备 PHP 项目")]),e._v(" "),r("ul",[r("li",[r("p",[e._v("PHP 项目")])]),e._v(" "),r("li",[r("p",[e._v("NGINX 配置")])]),e._v(" "),r("li",[r("p",[e._v("验证浏览器能通过网址访问到你的项目")])])]),e._v(" "),r("h2",{attrs:{id:"设置-xdebug"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#设置-xdebug"}},[e._v("#")]),e._v(" 设置 Xdebug")]),e._v(" "),r("h3",{attrs:{id:"调试-host-必选项"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#调试-host-必选项"}},[e._v("#")]),e._v(" 调试 HOST (必选项)")]),e._v(" "),r("p",[e._v("编辑 "),r("code",[e._v(".env")]),e._v(" 文件中的 "),r("code",[e._v("LNMP_XDEBUG_REMOTE_HOST=192.168.199.100")]),e._v(" 变量为你电脑的 IP，这就要求你的电脑必须固定 IP。不然电脑 IP 每次变化时，必须重新修改此变量。")]),e._v(" "),r("h4",{attrs:{id:"_1-docker-desktop"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-docker-desktop"}},[e._v("#")]),e._v(" 1. Docker Desktop")]),e._v(" "),r("p",[e._v("在 Docker 设置中没有配置自定义 DNS 的情况下可以使用 "),r("code",[e._v("LNMP_XDEBUG_REMOTE_HOST=host.docker.internal")]),e._v("。")]),e._v(" "),r("h4",{attrs:{id:"_2-docker-for-linux-docker-for-wsl2"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-docker-for-linux-docker-for-wsl2"}},[e._v("#")]),e._v(" 2. Docker for Linux / Docker for WSL2")]),e._v(" "),r("p",[e._v("要么电脑固定 IP，要么 IP 变化时编辑 "),r("code",[e._v(".env")]),e._v(" 文件中的 "),r("code",[e._v("LNMP_XDEBUG_REMOTE_HOST")]),e._v(" 变量")]),e._v(" "),r("h3",{attrs:{id:"调试端口（可选项）"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#调试端口（可选项）"}},[e._v("#")]),e._v(" 调试端口（可选项）")]),e._v(" "),r("p",[e._v("编辑 "),r("code",[e._v(".env")]),e._v(" 文件中的 "),r("code",[e._v("LNMP_XDEBUG_REMOTE_PORT=9001")]),e._v(" 变量，默认 "),r("code",[e._v("9001")])]),e._v(" "),r("h3",{attrs:{id:"警告"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#警告"}},[e._v("#")]),e._v(" 警告")]),e._v(" "),r("p",[e._v("其他选项严禁修改，除非你明确知道某个选项将产生什么影响。")]),e._v(" "),r("h2",{attrs:{id:"重启容器"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#重启容器"}},[e._v("#")]),e._v(" 重启容器")]),e._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[e._v("$ ./lnmp-docker restart php7\n")])])]),r("h2",{attrs:{id:"在-ide-设置中配置-xdebug"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#在-ide-设置中配置-xdebug"}},[e._v("#")]),e._v(" 在 "),r("code",[e._v("IDE")]),e._v(" 设置中配置 "),r("code",[e._v("Xdebug")])]),e._v(" "),r("p",[r("code",[e._v("Preferenences")]),e._v(" -> "),r("code",[e._v("Languages & ...")]),e._v("-> "),r("code",[e._v("PHP")]),e._v(" -> "),r("code",[e._v("Debug")]),e._v("-> "),r("code",[e._v("xdebug")]),e._v("-> "),r("code",[e._v("Debug port 9001")]),e._v("(默认为 "),r("code",[e._v("9000")]),e._v("，这里改为 "),r("code",[e._v("9001")]),e._v(")")]),e._v(" "),r("blockquote",[r("p",[r("code",[e._v("9001")]),e._v(" 端口务必与 "),r("code",[e._v("./config/php/docker-xdebug.ini")]),e._v(" 一致。")])]),e._v(" "),r("h2",{attrs:{id:"浏览器扩展"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#浏览器扩展"}},[e._v("#")]),e._v(" 浏览器扩展")]),e._v(" "),r("ul",[r("li",[r("p",[r("a",{attrs:{href:"https://github.com/BrianGilbert/xdebug-helper-for-firefox",target:"_blank",rel:"noopener noreferrer"}},[e._v("火狐"),r("OutboundLink")],1)])]),e._v(" "),r("li",[r("p",[r("a",{attrs:{href:"https://github.com/mac-cain13/xdebug-helper-for-chrome",target:"_blank",rel:"noopener noreferrer"}},[e._v("Chrome"),r("OutboundLink")],1)])])]),e._v(" "),r("p",[r("strong",[e._v("在扩展配置中 IDE key 选择 PhpStorm")])]),e._v(" "),r("h2",{attrs:{id:"使用步骤"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#使用步骤"}},[e._v("#")]),e._v(" 使用步骤")]),e._v(" "),r("ul",[r("li",[r("p",[e._v("1.IDE 中点击工具栏电话图标")])]),e._v(" "),r("li",[r("p",[e._v("2.编写代码")])]),e._v(" "),r("li",[r("p",[e._v("3.打断点")])]),e._v(" "),r("li",[r("p",[e._v("4.浏览器打开对应页面，在页面点击扩展图标，选择 "),r("code",[e._v("debug")]),e._v("，之后刷新页面")])]),e._v(" "),r("li",[r("p",[e._v("5.自动跳转到 IDE，开始调试")])]),e._v(" "),r("li",[r("p",[e._v("6.首次刷新 IDE 会出现配置窗口，直接点击 "),r("code",[e._v("Accept")]),e._v(" 即可。(仅需配置一次)")])]),e._v(" "),r("li",[r("p",[e._v("7.配置路径对应关系，由于本地代码目录结构与容器中的不一致，我们必须配置其对应关系，设置页面，"),r("code",[e._v("Preferenences")]),e._v(" -> "),r("code",[e._v("Languages & ...")]),e._v("-> "),r("code",[e._v("PHP")]),e._v(" -> "),r("code",[e._v("Servers")]),e._v(" -> "),r("code",[e._v("C:\\Users\\username\\app\\laravel(本地路径)")]),e._v(" 对应 "),r("code",[e._v("/app/laravel(容器路径)")]),e._v("(请根据实际情况配置)(仅需配置一次)")])])]),e._v(" "),r("h2",{attrs:{id:"more-information"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#more-information"}},[e._v("#")]),e._v(" More Information")]),e._v(" "),r("ul",[r("li",[r("p",[e._v("https://xdebug.org/docs/remote")])]),e._v(" "),r("li",[r("p",[e._v("https://segmentfault.com/a/1190000010833434")])]),e._v(" "),r("li",[r("p",[e._v("https://confluence.jetbrains.com/display/PhpStorm/Docker+Support+in+PhpStorm")])])])])}),[],!1,null,null,null);t.default=_.exports}}]);