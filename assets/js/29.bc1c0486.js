(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{383:function(e,t,s){"use strict";s.r(t);var a=s(42),o=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"docker-compose"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose"}},[e._v("#")]),e._v(" Docker Compose")]),e._v(" "),s("ul",[s("li",[e._v("https://docs.docker.com/compose/compose-file/")]),e._v(" "),s("li",[e._v("https://blog.csdn.net/chenqijing2/article/details/79506991")])]),e._v(" "),s("p",[s("code",[e._v("环境变量")]),e._v(" 优先级大于 "),s("code",[e._v(".env")]),e._v(" 文件。")]),e._v(" "),s("blockquote",[s("p",[e._v("Values set in the shell environment override those set in the "),s("code",[e._v(".env")]),e._v(" file.")])]),e._v(" "),s("h2",{attrs:{id:"变量解析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#变量解析"}},[e._v("#")]),e._v(" 变量解析")]),e._v(" "),s("ul",[s("li",[s("p",[s("code",[e._v("${VARIABLE:-default}")]),e._v(" evaluates to default if VARIABLE is unset or empty in the environment. 未设置或为空，则为 "),s("code",[e._v("default")])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("${VARIABLE-default}")]),e._v(" evaluates to default only if VARIABLE is unset in the environment. 未设置，则为 "),s("code",[e._v("default")])])])]),e._v(" "),s("p",[e._v("Similarly, the following syntax allows you to specify mandatory variables:")]),e._v(" "),s("ul",[s("li",[s("p",[s("code",[e._v("${VARIABLE:?err msg}")]),e._v(" exits with an error message containing err if VARIABLE is unset or empty in the environment. 未设置或为空，报错 "),s("code",[e._v("err msg")])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("${VARIABLE?err msg}")]),e._v(" exits with an error message containing err if VARIABLE is unset in the environment. 未设置，报错 "),s("code",[e._v("err msg")])])])]),e._v(" "),s("h2",{attrs:{id:""}},[s("a",{staticClass:"header-anchor",attrs:{href:"#"}},[e._v("#")]),e._v(" $$")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("web:\n  build: "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(".")]),e._v("\n  command: "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"echo '),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$$")]),e._v('VAR_NOT_INTERPOLATED_BY_COMPOSE"')]),e._v("\n")])])]),s("p",[s("code",[e._v("$VAR")]),e._v(" 都会被 compose 当作变量被解析，可以使用 "),s("code",[e._v("$$")]),e._v(" 避免被 compose 解析。")]),e._v(" "),s("h2",{attrs:{id:"docker-stack-不支持-env-文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-stack-不支持-env-文件"}},[e._v("#")]),e._v(" docker stack 不支持 "),s("code",[e._v(".env")]),e._v(" 文件")]),e._v(" "),s("h2",{attrs:{id:"network-attachable-swarm-mode"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#network-attachable-swarm-mode"}},[e._v("#")]),e._v(" network attachable (swarm mode)")]),e._v(" "),s("ul",[s("li",[e._v("https://docs.docker.com/compose/compose-file/compose-file-v3/#attachable")])])])}),[],!1,null,null,null);t.default=o.exports}}]);