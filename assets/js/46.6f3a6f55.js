(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{400:function(t,a,s){"use strict";s.r(a);var n=s(42),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"git-gpg"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#git-gpg"}},[t._v("#")]),t._v(" Git GPG")]),t._v(" "),s("ul",[s("li",[t._v("https://docs.github.com/en/github/authenticating-to-github/managing-commit-signature-verification")])]),t._v(" "),s("p",[s("strong",[t._v("Windows")])]),t._v(" "),s("ul",[s("li",[t._v("https://www.gnupg.org/download/index.html")]),t._v(" "),s("li",[t._v("https://gpg4win.org/download.html")])]),t._v(" "),s("p",[s("strong",[t._v("Linux")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" gnupg\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 生成 key")]),t._v("\n$ gpg --default-new-key-algo rsa4096 --gen-key\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 列出公钥")]),t._v("\n$ gpg --list-keys\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 列出私钥")]),t._v("\n$ gpg --list-secret-keys --keyid-format LONG\n\nsec   rsa4096/"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("GPG-key-id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2018")]),t._v("-09-15 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("SC"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("expires: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),t._v("-09-14"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      XXXX\nuid                 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("ultimate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" khs1994 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("khs1994@khs1994.com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 导出")]),t._v("\n$ gpg --armor --export "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("GPG-key-id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# copy output to github")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# https://docs.github.com/en/github/authenticating-to-github/managing-commit-signature-verification/adding-a-new-gpg-key-to-your-github-account")]),t._v("\n")])])]),s("h2",{attrs:{id:"配置-git"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置-git"}},[t._v("#")]),t._v(" 配置 GIT")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" config --global user.signingkey "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("GPG-key-id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" config --local commit.gpgsign "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# $ git config --global commit.gpgsign true")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Windows 设置 gpg 绝对路径")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# $ git config --global gpg.program "C:\\Program Files (x86)\\gnupg\\bin\\gpg.exe"')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Linux 可能会遇到错误")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 在 ~/.bashrc ~/.bash_profile 两个文件中加入 export GPG_TTY=$(tty)")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 签署 commit")]),t._v("\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" commit -S -s -m "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"your commit message"')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 签署 tag")]),t._v("\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" tag -s mytag\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看 tag")]),t._v("\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" tag -v mytag\n")])])]),s("h2",{attrs:{id:"备份"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#备份"}},[t._v("#")]),t._v(" 备份")]),t._v(" "),s("p",[t._v("备份分为备份公钥和私钥两个部分")]),t._v(" "),s("p",[s("strong",[t._v("备份公钥：")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ gpg -o filename.pub --export "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("GPG-key-id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),s("p",[t._v("如果没有 KeyID 则是备份所有的公钥，-o 表示输出到文件 filename.pub 中，如果加上 -a 参数则输出文本格式的信息，否则输出的是二进制格式信息。")]),t._v(" "),s("p",[s("strong",[t._v("备份私钥：")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ gpg -o filename --export-secret-keys "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("GPG-key-id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),s("p",[s("strong",[t._v("可以通过以下命令导入")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ gpg --import filename"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(".pub"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"x-509-key"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#x-509-key"}},[t._v("#")]),t._v(" X.509 Key")]),t._v(" "),s("ul",[s("li",[t._v("https://docs.github.com/en/github/authenticating-to-github/managing-commit-signature-verification/telling-git-about-your-signing-key")])]),t._v(" "),s("p",[t._v("git 2.19 +")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" config --global gpg.x509.program smimesign\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" config --global gpg.format x509\n")])])]),s("p",[t._v("git 2.18 -")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" config --global gpg.program smimesign\n")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);