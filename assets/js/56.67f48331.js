(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{458:function(s,a,t){"use strict";t.r(a);var e=t(42),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"包管理工具-lpm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#包管理工具-lpm"}},[s._v("#")]),s._v(" "),t("a",{attrs:{href:"https://github.com/khs1994-docker?utf8=%E2%9C%93&q=lwpm&type=&language=",target:"_blank",rel:"noopener noreferrer"}},[s._v("包管理工具 lpm"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("正如 "),t("code",[s._v("macOS")]),s._v(" 上的 "),t("code",[s._v("brew")]),s._v("、Linux 上的 "),t("code",[s._v("apt")]),s._v(" "),t("code",[s._v("yum")]),s._v(" "),t("code",[s._v("dnf")]),s._v("，本项目提供了 "),t("code",[s._v("lpm.ps1")]),s._v(" 这一包管理工具，让开发者快速安装开发软件。")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./lpm.ps1 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" go\n")])])]),t("p",[s._v("执行以上命令可以安装 "),t("code",[s._v("go")]),s._v("。执行 "),t("code",[s._v("$ ./lpm list")]),s._v(" 查看可供安装的软件。")]),s._v(" "),t("h2",{attrs:{id:"安装测试版软件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装测试版软件"}},[s._v("#")]),s._v(" 安装测试版软件")]),s._v(" "),t("p",[s._v("只需加上 "),t("code",[s._v("--pre")]),s._v(" 参数即可安装测试版软件。")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./lpm.ps1 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" go --pre\n")])])]),t("h2",{attrs:{id:"开发一个包-开发者"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开发一个包-开发者"}},[s._v("#")]),s._v(" 开发一个包(开发者)")]),s._v(" "),t("p",[s._v("本项目提供了一些常用的包，你也可以自己开发一个包，供用户安装某个软件。")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./lpm.ps1 init example\n")])])]),t("p",[s._v("编辑 "),t("code",[s._v("~/lnmp/vendor/lwpm-dev/example")]),s._v(" 文件夹中的文件。")]),s._v(" "),t("p",[s._v("编辑好之后推送到 docker hub 或者其他私有 docker registry(通过 "),t("code",[s._v('$env:LWPM_DOCKER_REGISTRY="docker-registry.domain.com"')]),s._v(" 设置)")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# $ $env:LWPM_DOCKER_REGISTRY="docker-registry.domain.com"')]),s._v("\n\n$ "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$env")]),s._v(":LWPM_DOCKER_USERNAME"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"your_username"')]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$env")]),s._v(":LWPM_DOCKER_PASSWORD"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"your_password"')]),s._v("\n\n$ ./lpm.ps1 push docker_registry_username/example\n")])])]),t("ul",[t("li",[s._v("示例: https://github.com/khs1994-docker/lwpm-openjdk")])]),s._v(" "),t("h2",{attrs:{id:"添加一个包-并安装软件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加一个包-并安装软件"}},[s._v("#")]),s._v(" 添加一个包，并安装软件")]),s._v(" "),t("p",[s._v("在 https://hub.docker.com/u/lwpm 寻找一个包，并使用以下命令添加包并安装该包所提供的软件：")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ~/lnmp\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# $ $env:LWPM_DOCKER_REGISTRY="docker-registry.domain.com"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# $ $env:LWPM_DOCKER_USERNAME="your_username"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# $ $env:LWPM_DOCKER_PASSWORD="your_password"')]),s._v("\n\n$ ./lpm.ps1 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" example\n\n$ ./lpm.ps1 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" example\n")])])]),t("h2",{attrs:{id:"优先级-开发者"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#优先级-开发者"}},[s._v("#")]),s._v(" 优先级(开发者)")]),s._v(" "),t("p",[t("code",[s._v("vendor/lwpm-dev")]),s._v(" 大于 "),t("code",[s._v("vendor/lwpm")]),s._v(" 大于 "),t("code",[s._v("默认自带包（windows/lnmp-windows-pm-repo）")])]),s._v(" "),t("h2",{attrs:{id:"windows-服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#windows-服务"}},[s._v("#")]),s._v(" Windows 服务")]),s._v(" "),t("p",[t("strong",[s._v("注册（新增）服务")])]),s._v(" "),t("p",[s._v("请以 "),t("strong",[s._v("管理员权限")]),s._v(" 打开 "),t("code",[s._v("powershell")]),s._v(" 执行下面的命令(这里以 minio 为例)")]),s._v(" "),t("div",{staticClass:"language-powershell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\\windows\\lnmp"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("windows"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("pm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ps1 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install-service")]),s._v(" minio "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"C:/bin/minio"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"server"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$HOME")]),s._v('/minio"')]),s._v("，"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"--console-address"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('":9090"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"--address"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('":9080"')]),s._v(" C:"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("logs"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("minio"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("log\n")])])]),t("p",[t("strong",[s._v("移除服务")])]),s._v(" "),t("div",{staticClass:"language-powershell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lpm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ps1 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("remove-service")]),s._v(" minio\n")])])]),t("p",[t("strong",[s._v("启动服务")])]),s._v(" "),t("div",{staticClass:"language-powershell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lpm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ps1 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("start-service")]),s._v(" minio\n")])])]),t("p",[t("strong",[s._v("停止服务")])]),s._v(" "),t("div",{staticClass:"language-powershell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lpm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ps1 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("stop-service")]),s._v(" minio\n")])])]),t("p",[t("strong",[s._v("重启服务")])]),s._v(" "),t("div",{staticClass:"language-powershell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lpm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ps1 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("restart-service")]),s._v(" minio\n")])])]),t("h2",{attrs:{id:"开发者"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开发者"}},[s._v("#")]),s._v(" 开发者")]),s._v(" "),t("p",[t("strong",[s._v("dist")]),s._v(" 从软件源下载文件并打包")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v(" package\n "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("__dist\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("__os-arch\n       "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n       "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("__dist_file-os-arch\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("__linux-amd64\n       "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n       "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("__dist_file-linux-amd64\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("__linux-arm\n       "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n       "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("__dist_file-linux-arm\n "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("__lwpm.json\n")])])]),t("p",[t("strong",[s._v("add --platform")]),s._v(" 获取所有架构的文件（从 Docker Registry 获取文件）")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v(" package\n "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("__dist\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("__dist_file-os-arch\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("__dist_file-linux-amd64\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("__dist_file-linux-arm\n "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("__lwpm.json\n")])])]),t("p",[t("strong",[s._v("push")]),s._v(" 推送到 Docker Registry")]),s._v(" "),t("h2",{attrs:{id:"lwpm-json-支持的变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#lwpm-json-支持的变量"}},[s._v("#")]),s._v(" lwpm.json 支持的变量")]),s._v(" "),t("ul",[t("li",[t("p",[t("code",[s._v("${lwpm}")]),s._v(" "),t("strong",[t("code",[s._v("lwpm.json")]),s._v(" 转化成的对象，例如读取包名可以使用 "),t("code",[s._v("${lwpm}.name")])])])]),s._v(" "),t("li",[t("p",[t("code",[s._v("${VERSION}")])])]),s._v(" "),t("li",[t("p",[t("code",[s._v("$filename")]),s._v(" 下载的文件")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("$env:lwpm_os")]),s._v(" (e.g. linux)")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("$env:lwpm_architecture")]),s._v(" (e.g. amd64)")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("$env:LWPM_UNAME_S")]),s._v(" (e.g. Linux)")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("$env:LWPM_UNAME_M")]),s._v(" (e.g. x86_64)")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("$_IsWindows")]),s._v(" "),t("code",[s._v("$_IsMacOS")]),s._v(" "),t("code",[s._v("$_IsLinux")]),s._v(" 指当前处理的目标平台（注意与 "),t("code",[s._v("$IsWindows")]),s._v(" 等变量的区别，这些变量指当前 powershell 运行的平台 ）")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("$env:LWPM_PKG_ROOT")]),s._v("(lwpm.json 所在文件夹)")])])]),s._v(" "),t("h2",{attrs:{id:"lwpm-json-支持的部分函数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#lwpm-json-支持的部分函数"}},[s._v("#")]),s._v(" lwpm.json 支持的部分函数")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("printError")]),s._v(" "),t("code",[s._v("printInfo")]),s._v(" "),t("code",[s._v("PrintWarning")])]),s._v(" "),t("li",[t("code",[s._v("_cleanup")])]),s._v(" "),t("li",[t("code",[s._v("_unzip")])]),s._v(" "),t("li",[t("code",[s._v("_mkdir")])]),s._v(" "),t("li",[t("code",[s._v("start-process file.exe -wait")])]),s._v(" "),t("li",[t("code",[s._v("Get-SHA256")]),s._v(" "),t("code",[s._v("Get-SHA384")]),s._v(" "),t("code",[s._v("Get-SHA512")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);